<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Building Java Projects with Mill :: The Mill JVM Build Tool</title>
    <link rel="canonical" href="https://mill-build.org/mill/0.12.0/javalib/intro.html" />
    <link rel="prev" href="../index.html" />
    <link rel="next" href="installation-ide.html" />
    <meta name="generator" content="Antora 3.1.9" />
    <link rel="stylesheet" href="../../_/css/site.css" />
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-1C582ZJR85"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','G-1C582ZJR85')</script>
<link rel="icon" href="../../_/favicon.png" type="image/x-icon" />
  
  </head><body class="article">
  
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <!-- TODO: add mill icon -->
      <a class="navbar-item" href="https://mill-build.org"><img src="../../_/logo-white.svg" height="20" />Â The Mill JVM Build Tool</a>
      <div class="navbar-item search">
        <input id="search-input" type="text" placeholder="Search the docs" />
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill">Source Code (GitHub)</a>
        <a class="navbar-item" href="https://mill-build.org/api/latest/index.html">API</a>
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill/issues">Issues</a>
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill/discussions">Discuss</a>
        <a class="navbar-item" href="https://discord.gg/xJCYRVMS">Chat</a>

            <!--
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Documentation</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#"></a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Plugins</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
        -->
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="mill" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">

  <li class="nav-item is-current-page" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="intro.html">Building Java Projects with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="installation-ide.html">Installation and IDE Support</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="builtin-commands.html">Built-in Commands</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="module-config.html">Java Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="dependencies.html">Java Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="testing.html">Testing Java Projects</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="linting.html">Linting Java Projects</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="publishing.html">Publishing Java Projects</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="build-examples.html">Java Build Examples</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="web-examples.html">Java Web Project Examples</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="android-examples.html">(Experimental) Android Builds</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../scalalib/intro.html">Building Scala Projects with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../scalalib/installation-ide.html">Installation and IDE Support</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../scalalib/builtin-commands.html">Built-in Commands</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../scalalib/module-config.html">Scala Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../scalalib/dependencies.html">Scala Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../scalalib/testing.html">Testing Scala Projects</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../scalalib/linting.html">Linting Scala Projects</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../scalalib/publishing.html">Publishing Scala Projects</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../scalalib/build-examples.html">Scala Build Examples</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../scalalib/web-examples.html">Scala Web Project Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../kotlinlib/intro.html">(Experimental) Kotlin with Mill</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../kotlinlib/installation-ide.html">Installation and IDE Support</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../kotlinlib/builtin-commands.html">Built-in Commands</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../kotlinlib/module-config.html">Kotlin Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../kotlinlib/dependencies.html">Kotlin Library Dependencies</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../kotlinlib/testing.html">Testing Kotlin Projects</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../kotlinlib/linting.html">Linting Kotlin Projects</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../kotlinlib/publishing.html">Publishing Kotlin Projects</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../kotlinlib/build-examples.html">Kotlin Build Examples</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../kotlinlib/web-examples.html">Kotlin Web Project Examples</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../kotlinlib/android-examples.html">(Experimental) Android Builds</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Build Tool Comparisons</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../comparisons/maven.html">Case Study: Mill vs Maven</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../comparisons/gradle.html">Case Study: Mill vs Gradle</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../comparisons/sbt.html">Case Study: Mill vs SBT</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Mill Fundamentals</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../fundamentals/tasks.html">Tasks</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../fundamentals/modules.html">Modules</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../fundamentals/out-dir.html">The Output Directory</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../fundamentals/query-syntax.html">Task Query Syntax</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../fundamentals/library-deps.html">Library Dependencies in Mill</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../fundamentals/cross-builds.html">Cross Builds</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../fundamentals/bundled-libraries.html">Bundled Libraries</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extending Mill</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../extending/import-ivy-plugins.html">Import Libraries and Plugins</a>
  </li>

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../extending/contrib-plugins.html">Contrib Plugins</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/artifactory.html">Artifactory</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/bintray.html">Bintray</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/bloop.html">Bloop</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/buildinfo.html">BuildInfo</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/codeartifact.html">Codeartifact</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/docker.html">Docker</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/flyway.html">Flyway</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/gitlab.html">Gitlab</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/jmh.html">JMH</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/playlib.html">Play Framework</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/proguard.html">Proguard</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/scalapblib.html">ScalaPB</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/scoverage.html">Scoverage</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/sonatypecentral.html">Sonatype Central</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/testng.html">TestNG</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/twirllib.html">Twirl</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contrib/versionfile.html">Version file</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../extending/thirdparty-plugins.html">Third-Party Plugins</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../extending/running-jvm-code.html">Running Dynamic JVM Code</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../extending/writing-plugins.html">Writing Mill Plugins</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../extending/meta-build.html">The Mill Meta-Build</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../extending/new-language.html">Support for New Languages</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Mill In Depth</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../depth/large-builds.html">Large Builds and Monorepos</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../depth/sandboxing.html">Mill Sandboxing</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../depth/evaluation-model.html">The Mill Evaluation Model</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../depth/design-principles.html">Mill Design Principles</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../depth/why-scala.html">Why does Mill use Scala?</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://mill-build.org/api/latest/mill/index.html">Mill Scaladoc</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../reference/changelog.html">Changelog</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../0.12.0/javalib/intro.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Mill Documentation</a></li>
    <li><a href="intro.html">Building Java Projects with Mill</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">0.12.0-19-f66304</button>
  <div class="version-menu">
    <a class="version is-current" href="intro.html">0.12.0-19-f66304</a>
    <a class="version" href="../0.12.0/javalib/intro.html">0.12.0</a>
    <a class="version is-missing" href="../0.11.12/index.html">0.11.12</a>
    <a class="version is-missing" href="../0.11.11/index.html">0.11.11</a>
    <a class="version is-missing" href="../0.11.10/index.html">0.11.10</a>
    <a class="version" href="../0.11.0-M7/Intro_to_Mill.html">0.11.0-M7</a>
    <a class="version" href="../0.10.15/Intro_to_Mill.html">0.10.15</a>
    <a class="version" href="../0.10.12/Intro_to_Mill.html">0.10.12</a>
    <a class="version" href="../0.10.0/Intro_to_Mill.html">0.10.0</a>
    <a class="version" href="../0.9.12/Intro_to_Mill.html">0.9.12</a>
  </div>
</div>
<div class="edit-this-page"><a href="https://github.com/com-lihaoyi/mill/edit/main/docs/modules/ROOT/pages/javalib/intro.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Building Java Projects with Mill</h1>
<div id="preamble">
<div class="sectionbody">
<script>
gtag('config', 'AW-16649289906');

document.addEventListener('DOMContentLoaded', function() {
const links = document.querySelectorAll('a');
  links.forEach(link => {
    if (link.textContent.trim().toLowerCase() === 'download') {
      link.addEventListener('click', function(event) {
        console.log("download link clicked")
        gtag('event', 'conversion', {'send_to': 'AW-16649289906/rsphCKfVq8QZELKBgIM-'});
      });
    }
  });
});
</script>
<center>
<svg width="618px" height="248px" viewBox="0.00 0.00 618.15 248.00" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1.0 1.0) rotate(0.0) translate(4.0 244.0)">
<title>G</title>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<polygon fill="transparent" stroke="black" stroke-dasharray="5,2" points="8,-124 8,-232 476.68,-232 476.68,-124 8,-124"></polygon>
<text text-anchor="middle" x="242.34" y="-215.4" font-family="Times,serif" font-size="14.00">foo</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_1</title>
<polygon fill="transparent" stroke="black" stroke-dasharray="5,2" points="126.09,-8 126.09,-116 602.15,-116 602.15,-8 126.09,-8"></polygon>
<text text-anchor="middle" x="364.12" y="-99.4" font-family="Times,serif" font-size="14.00">bar</text>
</g>
<!-- foo.sources -->
<g id="node1" class="node">
<title>foo.sources</title>
<polygon fill="white" stroke="black" points="96.21,-156.3 15.93,-156.3 15.93,-131.7 96.21,-131.7 96.21,-156.3"></polygon>
<text text-anchor="middle" x="56.07" y="-139.8" font-family="Times,serif" font-size="14.00">foo.sources</text>
</g>
<!-- foo.compile -->
<g id="node2" class="node">
<title>foo.compile</title>
<polygon fill="white" stroke="black" points="215.53,-156.3 132.01,-156.3 132.01,-131.7 215.53,-131.7 215.53,-156.3"></polygon>
<text text-anchor="middle" x="173.77" y="-139.8" font-family="Times,serif" font-size="14.00">foo.compile</text>
</g>
<!-- foo.sources&#45;&gt;foo.compile -->
<g id="edge1" class="edge">
<title>foo.sources-&gt;foo.compile</title>
<path fill="none" stroke="black" d="M96.24,-144C104.53,-144 113.4,-144 122.05,-144"></path>
<polygon fill="black" stroke="black" points="122.06,-147.5 132.06,-144 122.06,-140.5 122.06,-147.5"></polygon>
</g>
<!-- foo.classPath -->
<g id="node3" class="node">
<title>foo.classPath</title>
<polygon fill="white" stroke="black" points="342.17,-156.3 251.65,-156.3 251.65,-131.7 342.17,-131.7 342.17,-156.3"></polygon>
<text text-anchor="middle" x="296.91" y="-139.8" font-family="Times,serif" font-size="14.00">foo.classPath</text>
</g>
<!-- foo.compile&#45;&gt;foo.classPath -->
<g id="edge2" class="edge">
<title>foo.compile-&gt;foo.classPath</title>
<path fill="none" stroke="black" d="M215.44,-144C223.74,-144 232.6,-144 241.3,-144"></path>
<polygon fill="black" stroke="black" points="241.39,-147.5 251.39,-144 241.39,-140.5 241.39,-147.5"></polygon>
</g>
<!-- foo.assembly -->
<g id="node4" class="node">
<title>foo.assembly</title>
<polygon fill="white" stroke="black" points="468.81,-177.3 378.29,-177.3 378.29,-152.7 468.81,-152.7 468.81,-177.3"></polygon>
<text text-anchor="middle" x="423.55" y="-160.8" font-family="Times,serif" font-size="14.00">foo.assembly</text>
</g>
<!-- foo.classPath&#45;&gt;foo.assembly -->
<g id="edge3" class="edge">
<title>foo.classPath-&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M342.2,-151.46C350.65,-152.89 359.58,-154.39 368.3,-155.86"></path>
<polygon fill="black" stroke="black" points="367.95,-159.35 378.4,-157.56 369.12,-152.45 367.95,-159.35"></polygon>
</g>
<!-- bar.compile -->
<g id="node6" class="node">
<title>bar.compile</title>
<polygon fill="white" stroke="black" points="338.39,-83.3 255.43,-83.3 255.43,-58.7 338.39,-58.7 338.39,-83.3"></polygon>
<text text-anchor="middle" x="296.91" y="-66.8" font-family="Times,serif" font-size="14.00">bar.compile</text>
</g>
<!-- foo.classPath&#45;&gt;bar.compile -->
<g id="edge5" class="edge">
<title>foo.classPath-&gt;bar.compile</title>
<path fill="none" stroke="black" d="M296.91,-131.25C296.91,-118.7 296.91,-106.16 296.91,-93.61"></path>
<polygon fill="black" stroke="black" points="300.41,-93.55 296.91,-83.55 293.41,-93.55 300.41,-93.55"></polygon>
</g>
<!-- bar.classPath -->
<g id="node7" class="node">
<title>bar.classPath</title>
<polygon fill="white" stroke="black" points="468.52,-83.3 378.57,-83.3 378.57,-58.7 468.52,-58.7 468.52,-83.3"></polygon>
<text text-anchor="middle" x="423.55" y="-66.8" font-family="Times,serif" font-size="14.00">bar.classPath</text>
</g>
<!-- foo.classPath&#45;&gt;bar.classPath -->
<g id="edge6" class="edge">
<title>foo.classPath-&gt;bar.classPath</title>
<path fill="none" stroke="black" d="M321.6,-131.53C328.37,-127.89 335.72,-123.85 342.42,-120 359.91,-109.95 379.21,-98.17 394.48,-88.68"></path>
<polygon fill="black" stroke="black" points="396.33,-91.65 402.97,-83.38 392.63,-85.71 396.33,-91.65"></polygon>
</g>
<!-- foo.resources -->
<g id="node5" class="node">
<title>foo.resources</title>
<polygon fill="white" stroke="black" points="342.42,-199.3 251.39,-199.3 251.39,-174.7 342.42,-174.7 342.42,-199.3"></polygon>
<text text-anchor="middle" x="296.91" y="-182.8" font-family="Times,serif" font-size="14.00">foo.resources</text>
</g>
<!-- foo.resources&#45;&gt;foo.assembly -->
<g id="edge4" class="edge">
<title>foo.resources-&gt;foo.assembly</title>
<path fill="none" stroke="black" d="M342.55,-179.12C350.89,-177.65 359.68,-176.1 368.27,-174.58"></path>
<polygon fill="black" stroke="black" points="368.97,-178.01 378.21,-172.83 367.76,-171.12 368.97,-178.01"></polygon>
</g>
<!-- bar.compile&#45;&gt;bar.classPath -->
<g id="edge8" class="edge">
<title>bar.compile-&gt;bar.classPath</title>
<path fill="none" stroke="black" d="M338.37,-71C347.87,-71 358.14,-71 368.14,-71"></path>
<polygon fill="black" stroke="black" points="368.41,-74.5 378.41,-71 368.41,-67.5 368.41,-74.5"></polygon>
</g>
<!-- bar.assembly -->
<g id="node9" class="node">
<title>bar.assembly</title>
<polygon fill="white" stroke="black" points="594.39,-61.3 504.44,-61.3 504.44,-36.7 594.39,-36.7 594.39,-61.3"></polygon>
<text text-anchor="middle" x="549.41" y="-44.8" font-family="Times,serif" font-size="14.00">bar.assembly</text>
</g>
<!-- bar.classPath&#45;&gt;bar.assembly -->
<g id="edge9" class="edge">
<title>bar.classPath-&gt;bar.assembly</title>
<path fill="none" stroke="black" d="M468.57,-63.18C476.96,-61.69 485.84,-60.11 494.5,-58.57"></path>
<polygon fill="black" stroke="black" points="495.3,-61.99 504.54,-56.79 494.08,-55.1 495.3,-61.99"></polygon>
</g>
<!-- bar.sources -->
<g id="node8" class="node">
<title>bar.sources</title>
<polygon fill="white" stroke="black" points="213.63,-83.3 133.92,-83.3 133.92,-58.7 213.63,-58.7 213.63,-83.3"></polygon>
<text text-anchor="middle" x="173.77" y="-66.8" font-family="Times,serif" font-size="14.00">bar.sources</text>
</g>
<!-- bar.sources&#45;&gt;bar.compile -->
<g id="edge7" class="edge">
<title>bar.sources-&gt;bar.compile</title>
<path fill="none" stroke="black" d="M213.77,-71C223.73,-71 234.58,-71 245.04,-71"></path>
<polygon fill="black" stroke="black" points="245.32,-74.5 255.32,-71 245.32,-67.5 245.32,-74.5"></polygon>
</g>
<!-- bar.resources -->
<g id="node10" class="node">
<title>bar.resources</title>
<polygon fill="white" stroke="black" points="468.78,-40.3 378.32,-40.3 378.32,-15.7 468.78,-15.7 468.78,-40.3"></polygon>
<text text-anchor="middle" x="423.55" y="-23.8" font-family="Times,serif" font-size="14.00">bar.resources</text>
</g>
<!-- bar.resources&#45;&gt;bar.assembly -->
<g id="edge10" class="edge">
<title>bar.resources-&gt;bar.assembly</title>
<path fill="none" stroke="black" d="M468.92,-35.52C477.2,-36.93 485.94,-38.41 494.47,-39.85"></path>
<polygon fill="black" stroke="black" points="493.91,-43.31 504.35,-41.53 495.08,-36.41 493.91,-43.31"></polygon>
</g>
</g>
</svg>

</center>
<div class="paragraph">
<p>Mill is a fast, scalable, multi-language JVM build tool that supports
Java, Scala, and Kotlin:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mill builds can compile the same codebase <a href="../comparisons/maven.html" class="xref page">5-10x faster than Maven</a>,
or <a href="../comparisons/gradle.html" class="xref page">2-4x faster than Gradle</a></p>
</li>
<li>
<p>Millâs typed, functional config language provides a richer IDE experience
than <a href="../comparisons/maven.html#_extensibility_ide_experience" class="xref page">Maven</a>,
<a href="../comparisons/gradle.html#_ide_experience" class="xref page">Gradle</a> or <a href="../comparisons/sbt.html#_ide_support" class="xref page">SBT</a>.</p>
</li>
<li>
<p>Mill scales well from small single-module projects
to <a href="../depth/large-builds.html" class="xref page">large monorepos</a> with hundreds of modules</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Mill achieves this via the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Performance</strong>: Millâs <a href="../fundamentals/tasks.html" class="xref page">build graph</a> automatically
<a href="../depth/evaluation-model.html#_caching_at_each_layer_of_the_evaluation_model" class="xref page">caches</a>
and <a href="#_parallel_task_execution">parallelizes</a> build
tasks, keeping your workflows fast and responsive. Mill adds minimal overhead over
the logic necessary to build your project, while providing tools to let you identify
and resolve bottlenecks in your build</p>
</li>
<li>
<p><strong>Maintainability</strong>: Mill goes beyond YAML and Bash, with config and custom logic written in
<a href="#_custom_build_logic">concise type-checked code</a>. This catches bugs and
config problems at compile time, and lets IDEs
(<a href="installation-ide.html#_intellij" class="xref page">IntelliJ</a> or
<a href="installation-ide.html#_vscode" class="xref page">VSCode</a>)
understand and navigate around your build as easily as
any application codebase.</p>
</li>
<li>
<p><strong>Flexibility</strong>: Millâs tasks and modules allow anything from adding
<a href="../fundamentals/tasks.html#primitive-tasks" class="xref page">simple build steps</a>, up to
entire <a href="../extending/new-language.html" class="xref page">language toolchains</a>.
You can <a href="../extending/import-ivy-plugins.html" class="xref page">import any JVM library</a> in your build,
use Millâs rich ecosystem of <a href="../extending/thirdparty-plugins.html" class="xref page">Third-Party Mill Plugins</a>,
or <a href="../extending/writing-plugins.html" class="xref page">write plugins</a> yourself and
<a href="../extending/writing-plugins.html#_publishing" class="xref page">publish them</a> to Maven Central for others to use.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Mill is used to build some real-world Java projects, such as the
<a href="https://github.com/swaldman/c3p0">C3P0 JDBC Connection Pool</a>, and
can be used for applications built on top of common Java frameworks like
<a href="web-examples.html#_spring_boot_todomvc_app" class="xref page">Spring Boot</a> or
<a href="web-examples.html#_micronaut_todomvc_app" class="xref page">Micronaut</a>.</p>
</div>
<div class="paragraph">
<p>Mill borrows ideas from other tools like <a href="https://maven.apache.org/">Maven</a>,
<a href="https://gradle.org/">Gradle</a>, <a href="https://bazel.build/">Bazel</a>, but tries to learn from the
strengths of each tool and improve on their weaknesses. Although Maven and Gradle
are mature widely-used tools, they have fundamental limitations in their design
(<a href="https://blog.ltgt.net/maven-is-broken-by-design/">Maven</a>,
<a href="https://www.bruceeckel.com/2021/01/02/the-problem-with-gradle/">Gradle</a>) that make
them difficult to improve upon incrementally.</p>
</div>
<div class="paragraph">
<p><a href="../comparisons/maven.html" class="xref page">Compared to Maven</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Mill follows Mavenâs innovation of good built-in defaults</strong>: Millâs built-in
<code>JavaModule</code>s follow Mavenâs &quot;convention over configuration&quot; style, so small Mill
projects require minimal effort to get started, and larger Mill projects have a consistent
structure building on these defaults.</p>
</li>
<li>
<p><strong>Mill automatically caches and parallelizes your build, offering 3-10x speedups</strong>:
Not just the built-in tasks that Mill ships with, but also any custom tasks or modules.
This maximizes the snappiness of your command-line build workflows to keep you productive,
which especially matters in larger codebases where builds tend to get slow:
<a href="../comparisons/maven.html#_performance" class="xref page">a Maven &quot;clean install&quot; workflow
taking over a minute might take just a few seconds in Mill</a>.</p>
</li>
<li>
<p><strong>Mill makes customizing the build tool much easier than Maven</strong>. Projects usually
grow beyond just compiling a single language: needing custom
code generation, linting workflows, tool integrations, output artifacts, or support for
additional languages. Millâs <a href="../comparisons/maven.html#_extensibility_ide_experience" class="xref page">extensibility and IDE experience</a>
makes doing this yourself easy and safe, with type-checked code and
<a href="../depth/sandboxing.html" class="xref page">sandboxed tasks</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="../comparisons/gradle.html" class="xref page">Compared to Gradle</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Mill follows Gradleâs conciseness and extensibility</strong>: Rather than pages and pages of verbose XML, every
line in a Mill build is meaningful. e.g. adding a dependency is 1 line in
Mill, like it is in Gradle, and unlike the 5 line <code>&lt;dependency&gt;</code> declaration you find in Maven.
Like Gradle, end users can easily customize their build to fit their exact needs without
needing to go through the process of writing plugins.</p>
</li>
<li>
<p><strong>Mill can be <a href="../comparisons/gradle.html#_performance" class="xref page">2-3x faster than Gradle</a></strong>:
Although both Mill and Gradle automatically cache and parallelize your build, Mill
does so with much less fixed overhead. This means less time waiting for your build
tool, and more time for the things that really matter to your project.</p>
</li>
<li>
<p><strong>Mill enforces best practices by default</strong>.
<a href="../depth/evaluation-model.html#_caching_at_each_layer_of_the_evaluation_model" class="xref page">All parts of a Mill build are cached and incremental by default</a>.
All Mill tasks write their output to <a href="../fundamentals/out-dir.html" class="xref page">a standard place</a>.
All task inter-dependencies are automatically captured without manual annotation. Where Gradle requires
considerable effort and expertise to understand your build and set it up in the right way, Millâs
<a href="../comparisons/gradle.html#_ide_experience" class="xref page">good IDE experience</a> makes understanding
your build easier, and its <a href="../comparisons/gradle.html#_extensibility" class="xref page">extensibility model</a>
makes configuring your build foolproof, so the easiest thing to do in Mill is usually the
right thing to do.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Mill build files are written in Scala, but you do not need to have prior experience
in Scala to read or write them. Like Gradle Groovy or Maven XML, anyone can learn
enough Scala for Mill without needing to become an expert in the language.</p>
</div>
<div class="paragraph">
<p>If youâre interested in the fundamental ideas behind Mill, rather than the user-facing
benefits discussed above, check out the page on <a href="../depth/design-principles.html" class="xref page">Mill Design Principles</a>.
The rest of this page contains a quick introduction to getting start with using
Mill to build a simple Java program. The other pages of this doc-site go into
more depth, with more examples of how to use Mill and more details of how the
Mill build tool works.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_simple_java_module"><a class="anchor" href="#_simple_java_module"></a>Simple Java Module</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">build.mill (<a href="https://github.com/com-lihaoyi/mill/releases/download/0.12.0/0.12.0-example-javalib-basic-1-simple.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/0.12.0//example/javalib/basic/1-simple">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill._, javalib._

object foo extends JavaModule {
  def ivyDeps = Agg(
    ivy&quot;net.sourceforge.argparse4j:argparse4j:0.9.0&quot;,
    ivy&quot;org.thymeleaf:thymeleaf:3.1.1.RELEASE&quot;
  )

  object test extends JavaTests with TestModule.Junit4{
    def ivyDeps = super.ivyDeps() ++ Agg(
      ivy&quot;com.google.guava:guava:33.3.0-jre&quot;
    )
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a basic Mill build for a single <code>JavaModule</code>, with two
third-party dependencies and a test suite using the JUnit framework.</p>
</div>
<div class="paragraph">
<p>You can download this example project using the <strong>download</strong> link above
if you want to try out the commands below yourself, or browse the full sources
of the example (including supporting files) via the <strong>browse</strong> link. The only requirement is
that you have some version of the JVM installed; the <code>./mill</code> script takes
care of any further dependencies that need to be downloaded. All examples
in this documentation site are executable and are continually exercised as
part of Millâs CI workflows, and they range from the simple hello-world
projects on this page to more sophisticated
<a href="web-examples.html" class="xref page">web build examples</a> or
<a href="build-examples.html#_example_builds_for_real_projects" class="xref page">example
builds for real-world projects</a></p>
</div>
<div class="paragraph">
<p>The source code for this module lives in the <code>src/</code> folder.
Output for this module (compiled files, resolved dependency lists, â¦â)
lives in <code>out/</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>build.mill
foo/
    src/
        foo/Foo.java
    resources/
        ...
    test/
        src/
            foo/FooTest.java
out/foo/
    compile.json
    compile.dest/
    ...
    test/
        compile.json
        compile.dest/
        ...</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The default Mill source folder layout <code>foo/src/</code> differs from that of Maven/Gradleâs
<code>foo/src/main/java/</code>.
If you wish to use the Maven source folder layout, e.g. for migrating
an existing codebase, you should use
<a href="#_maven_compatible_modules">Maven-Compatible Modules</a>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>This example project uses two third-party dependencies - <a href="https://argparse4j.github.io/">ArgParse4J</a> for CLI
argument parsing, <a href="https://www.thymeleaf.org//">Thymeleaf</a> for HTML rendering - and uses them to wrap a
given input string in HTML templates with proper escaping.</p>
</div>
<div class="paragraph">
<p>Typical usage of a <code>JavaModule</code> is shown below</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&gt; ./mill resolve foo._ # List what tasks are available to run
foo.assembly
...
foo.compile
...
foo.run

&gt; ./mill inspect foo.compile # Show documentation and inputs of a task
foo.compile(JavaModule...)
    Compiles the current module to generate compiled classfiles/bytecode.
Inputs:
    foo.upstreamCompileOutput
    foo.allSourceFiles
    foo.compileClasspath
...

&gt; ./mill foo.compile # compile sources into classfiles
...
compiling 1 Java source to...

&gt; ./mill foo.run # run the main method, if any
error: argument -t/--text is required
...

&gt; ./mill foo.run --text hello
&lt;h1&gt;hello&lt;/h1&gt;

&gt; ./mill foo.test
...
Test foo.FooTest.testEscaping finished, ...
Test foo.FooTest.testSimple finished, ...
Test run foo.FooTest finished: 0 failed, 0 ignored, 2 total, ...

&gt; ./mill foo.assembly # bundle classfiles and libraries into a jar for deployment

&gt; ./mill show foo.assembly # show the output of the assembly task
&quot;.../out/foo/assembly.dest/out.jar&quot;

&gt; java -jar ./out/foo/assembly.dest/out.jar --text hello
&lt;h1&gt;hello&lt;/h1&gt;

&gt; ./out/foo/assembly.dest/out.jar --text hello # mac/linux
&lt;h1&gt;hello&lt;/h1&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output of every Mill task is stored in the <code>out/</code> folder under a name
corresponding to the task that created it. e.g. The <code>assembly</code> task puts its
metadata output in <code>out/assembly.json</code>, and its output files in
<code>out/assembly.dest</code>. You can also use <code>show</code> to make Mill print out the
metadata output for a particular task.</p>
</div>
<div class="paragraph">
<p>Additional Mill tasks you would likely need include:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ mill runBackground # run the main method in the background

$ mill clean &lt;task&gt;  # delete the cached output of a task, terminate any runBackground

$ mill launcher      # prepares a foo/launcher.dest/run you can run later

$ mill jar           # bundle the classfiles into a jar suitable for publishing

$ mill -i console    # start a Scala console within your project

$ mill -i repl       # start an Ammonite Scala REPL within your project</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can run <code>mill resolve __</code> to see a full list of the different tasks that
are available, <code>mill resolve _</code> to see the tasks within <code>foo</code>,
<code>mill inspect compile</code> to inspect a taskâs doc-comment documentation or what
it depends on, or <code>mill show foo.scalaVersion</code> to show the output of any task.</p>
</div>
<div class="paragraph">
<p>The most common <strong>tasks</strong> that Mill can run are cached tasks, such as
<code>compile</code>, and un-cached <strong>commands</strong> such as <code>foo.run</code>. Cached tasks do not
re-evaluate unless one of their inputs changes, whereas commands re-run every
time. See the documentation for <a href="../fundamentals/tasks.html" class="xref page">Tasks</a> for
details on the different task types.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_custom_build_logic"><a class="anchor" href="#_custom_build_logic"></a>Custom Build Logic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mill makes it very easy to customize your build graph, overriding portions
of it with custom logic. In this example, we override the JVM <code>resources</code> of
our <code>JavaModule</code> - normally the <code>resources/</code> folder - to instead contain a
single generated text file containing the line count of all the source files
in that module</p>
</div>
<div class="listingblock">
<div class="title">build.mill (<a href="https://github.com/com-lihaoyi/mill/releases/download/0.12.0/0.12.0-example-javalib-basic-2-custom-build-logic.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/0.12.0//example/javalib/basic/2-custom-build-logic">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill._, javalib._

object foo extends JavaModule {
  /** Total number of lines in module source files */
  def lineCount = Task {
    allSourceFiles().map(f =&gt; os.read.lines(f.path).size).sum
  }

  /** Generate resources using lineCount of sources */
  override def resources = Task {
    os.write(Task.dest / &quot;line-count.txt&quot;, &quot;&quot; + lineCount())
    super.resources() ++ Seq(PathRef(Task.dest))
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The addition of <code>lineCount</code> and <code>resources</code> overrides the previous <code>resource</code>
folder provided by <code>JavaModule</code> (labelled <code>resources.super</code> below), replacing
it with the destination folder of the new <code>resources</code> task, which is wired
up to <code>lineCount</code>:</p>
</div>
<center>
<svg width="481px" height="76px" viewBox="0.00 0.00 480.78 75.80" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1.0 1.0) rotate(0.0) translate(4.0 71.8)">
<title>G</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-71.8 476.78,-71.8 476.78,4 -4,4"></polygon>
<!-- allSourceFiles -->
<g id="node1" class="node">
<title>allSourceFiles</title>
<polygon fill="white" stroke="white" points="96.14,-67.7 -0.05,-67.7 -0.05,-43.1 96.14,-43.1 96.14,-67.7"></polygon>
<text text-anchor="middle" x="48.05" y="-51.2" font-family="Times,serif" font-size="14.00">allSourceFiles</text>
</g>
<!-- lineCount -->
<g id="node2" class="node">
<title>lineCount</title>
<polygon fill="white" stroke="black" points="219.15,-67.7 147.7,-67.7 147.7,-43.1 219.15,-43.1 219.15,-67.7"></polygon>
<text text-anchor="middle" x="183.43" y="-51.2" font-family="Times,serif" font-size="14.00">lineCount</text>
</g>
<!-- allSourceFiles&#45;&gt;lineCount -->
<g id="edge1" class="edge">
<title>allSourceFiles-&gt;lineCount</title>
<path fill="none" stroke="black" d="M96.45,-55.4C109.8,-55.4 124.28,-55.4 137.49,-55.4"></path>
<polygon fill="black" stroke="black" points="137.76,-58.9 147.76,-55.4 137.76,-51.9 137.76,-58.9"></polygon>
</g>
<!-- resources -->
<g id="node3" class="node">
<title>resources</title>
<polygon fill="white" stroke="black" points="339.55,-45.7 270.84,-45.7 270.84,-21.1 339.55,-21.1 339.55,-45.7"></polygon>
<text text-anchor="middle" x="305.19" y="-29.2" font-family="Times,serif" font-size="14.00">resources</text>
</g>
<!-- lineCount&#45;&gt;resources -->
<g id="edge2" class="edge">
<title>lineCount-&gt;resources</title>
<path fill="none" stroke="black" d="M219.07,-49.04C231.95,-46.67 246.74,-43.95 260.34,-41.46"></path>
<polygon fill="black" stroke="black" points="261.25,-44.85 270.46,-39.6 259.99,-37.96 261.25,-44.85"></polygon>
</g>
<!-- ... -->
<g id="node4" class="node">
<title>...</title>
<polygon fill="white" stroke="white" points="402.37,-45.7 375.36,-45.7 375.36,-21.1 402.37,-21.1 402.37,-45.7"></polygon>
<text text-anchor="middle" x="388.87" y="-29.2" font-family="Times,serif" font-size="14.00">...</text>
</g>
<!-- resources&#45;&gt;... -->
<g id="edge3" class="edge">
<title>resources-&gt;...</title>
<path fill="none" stroke="black" d="M339.89,-33.4C348.37,-33.4 357.27,-33.4 365.08,-33.4"></path>
<polygon fill="black" stroke="black" points="365.22,-36.9 375.22,-33.4 365.22,-29.9 365.22,-36.9"></polygon>
</g>
<!-- run -->
<g id="node5" class="node">
<title>run</title>
<polygon fill="white" stroke="white" points="472.61,-45.7 438.29,-45.7 438.29,-21.1 472.61,-21.1 472.61,-45.7"></polygon>
<text text-anchor="middle" x="455.45" y="-29.2" font-family="Times,serif" font-size="14.00">run</text>
</g>
<!-- ...&#45;&gt;run -->
<g id="edge4" class="edge">
<title>...-&gt;run</title>
<path fill="none" stroke="black" d="M402.32,-33.4C409.51,-33.4 418.85,-33.4 427.63,-33.4"></path>
<polygon fill="black" stroke="black" points="427.88,-36.9 437.88,-33.4 427.88,-29.9 427.88,-36.9"></polygon>
</g>
<!-- resources.super -->
<g id="node6" class="node">
<title>resources.super</title>
<polygon fill="white" stroke="white" points="234.6,-24.7 132.25,-24.7 132.25,-0.1 234.6,-0.1 234.6,-24.7"></polygon>
<text text-anchor="middle" x="183.43" y="-8.2" font-family="Times,serif" font-size="14.00">resources.super</text>
</g>
<!-- resources.super&#45;&gt;resources -->
<g id="edge5" class="edge">
<title>resources.super-&gt;resources</title>
<path fill="none" stroke="black" d="M234.87,-21.25C243.51,-22.76 252.41,-24.32 260.84,-25.8"></path>
<polygon fill="black" stroke="black" points="260.38,-29.27 270.84,-27.55 261.59,-22.38 260.38,-29.27"></polygon>
</g>
</g>
</svg>

</center>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&gt; mill foo.run
...
Line Count: 17

&gt; mill show foo.lineCount
17

&gt; mill inspect foo.lineCount
foo.lineCount(build.mill:...)
    Total number of lines in module source files
Inputs:
    foo.allSourceFiles</code></pre>
</div>
</div>
<div class="paragraph">
<p>Above, <code>def lineCount</code> is a new build task we define, which makes use of
<code>allSourceFiles</code> (an existing task) and is in-turn used in our override of
<code>resources</code> (also an existing task). The <code>override</code> keyword is optional in Mill.
This generated file can then be loaded and used at runtime, as see in the output
of <code>mill run</code>.</p>
</div>
<div class="paragraph">
<p>If youâre not familiar with what tasks you can <code>override</code> or how they are related,
you can explore the existing tasks via autocomplete in your IDE, or use the
<a href="builtin-commands.html#_visualize" class="xref page">mill visualize</a>.</p>
</div>
<div class="paragraph">
<p><code>os.read.lines</code> and <code>os.write</code> come
from the <a href="https://github.com/com-lihaoyi/os-lib">OS-Lib</a> library, which is
one of Millâs <a href="../fundamentals/bundled-libraries.html" class="xref page">Bundled Libraries</a>.
You can also import any other library you want from Maven Central using
<a href="../extending/import-ivy-plugins.html" class="xref page">import $ivy</a>, so you are not limited
to what is bundled with Mill.</p>
</div>
<div class="paragraph">
<p>Custom user-defined tasks in Mill benefit from all
the same things that built-in tasks do: automatic caching (in the
<a href="../fundamentals/out-dir.html" class="xref page">out/ folder</a>), parallelism (with the <a href="#_parallel_task_execution">-j/--jobs
flag</a>), inspectability (via <a href="builtin-commands.html#_show" class="xref page">show</a>/<a href="builtin-commands.html#_inspect" class="xref page">inspect</a>), and so on.
While these things may not matter for such a simple example that runs
quickly, they ensure that custom build logic remains performant and
maintainable even as the complexity of your project grows.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_multi_module_project"><a class="anchor" href="#_multi_module_project"></a>Multi-Module Project</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">build.mill (<a href="https://github.com/com-lihaoyi/mill/releases/download/0.12.0/0.12.0-example-javalib-basic-3-multi-module.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/0.12.0//example/javalib/basic/3-multi-module">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill._, javalib._

trait MyModule extends JavaModule{
  object test extends JavaTests with TestModule.Junit4
}

object foo extends MyModule{
  def moduleDeps = Seq(bar)
  def ivyDeps = Agg(
    ivy&quot;net.sourceforge.argparse4j:argparse4j:0.9.0&quot;,
  )
}

object bar extends MyModule{
  def ivyDeps = Agg(
    ivy&quot;net.sourceforge.argparse4j:argparse4j:0.9.0&quot;,
    ivy&quot;org.thymeleaf:thymeleaf:3.1.1.RELEASE&quot;
  )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example contains a simple Mill build with two modules, <code>foo</code> and <code>bar</code>,
which you can run tasks on such as <code>foo.run</code> or
<code>bar.run</code>. You can define multiple modules the same way you define a single
module, using <code>def moduleDeps</code> to define the relationship between them. Modules
can also be nested within each other, as <code>foo.test</code> and <code>bar.test</code> are nested
within <code>foo</code> and <code>bar</code> respectively</p>
</div>
<div class="paragraph">
<p>Note that we split out the <code>test</code> submodule configuration common to both
modules into a separate <code>trait MyModule</code>. This <a href="../fundamentals/modules.html" class="xref page">Trait Module</a>
lets us avoid the need to copy-paste common settings, while still letting
us define any per-module configuration such as <code>ivyDeps</code> specific to a
particular module. This is a common pattern within Mill builds.</p>
</div>
<div class="paragraph">
<p>The above builds expect the following project layout:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>build.mill
foo/
    src/
        foo/Foo.java
bar/
    src/
        bar/Bar.java
    test/
        src/
            bar/BarTests.java
out/
    foo/
        compile.json
        compile.dest/
        ...
    bar/
        compile.json
        compile.dest/
        ...
        test/
            compile.json
            compile.dest/
            ...</pre>
</div>
</div>
<div class="paragraph">
<p>Typically, both source code and output files in Mill follow the module
hierarchy, so e.g. input to the <code>foo</code> module lives in <code>foo/src/</code> and
compiled output files live in <code>out/foo/compile.dest</code>. You can use
<code>mill resolve</code> to list out what tasks you can run, e.g. <code>mill resolve __.run</code>
below which lists out all the <code>run</code> tasks:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&gt; mill resolve __.run
foo.run
bar.run

&gt; mill foo.run --foo-text hello --bar-text world
Foo.value: hello
Bar.value: &lt;h1&gt;world&lt;/h1&gt;

&gt; mill bar.run world
Bar.value: &lt;h1&gt;world&lt;/h1&gt;

&gt; mill bar.test
...
...bar.BarTests...simple...
...bar.BarTests...escaping...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Millâs evaluator will ensure that the modules are compiled in the right
order, and recompiled as necessary when source code in each module changes.
The unique path on disk that Mill automatically assigns each task also ensures
you do not need to worry about choosing a path on disk to cache outputs, or
filesystem collisions if multiple tasks write to the same path.</p>
</div>
<div class="paragraph">
<p>You can use wildcards and brace-expansion to select
multiple tasks at once or to shorten the path to deeply nested tasks. If
you provide optional task arguments and your wildcard or brace-expansion is
resolved to multiple tasks, the arguments will be applied to each of the
tasks.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Wildcards and brace-expansion</caption>
<colgroup>
<col style="width: 50%;" />
<col style="width: 50%;" />
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Wildcard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Function</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">matches a single segment of the task path</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>__</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">matches arbitrary segments of the task path</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{a,b}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">is equal to specifying two tasks <code>a</code> and <code>b</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can use the + symbol to add another task with optional arguments.
If you need to feed a + as argument to your task, you can mask it by
preceding it with a backslash (<code>\</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&gt; mill foo._.compile # Runs `compile` for all direct sub-modules of `foo`

&gt; mill foo.__.test # Runs `test` for all transitive sub-modules of `foo`

&gt; mill {foo,bar}.__.testCached # Runs `testCached` for all sub-modules of `foo` and `bar`

&gt; mill __.compile + foo.__.test # Runs all `compile` tasks and all tests under `foo`.</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more details on the query syntax, check out the
<a href="../fundamentals/query-syntax.html" class="xref page">query syntax documentation</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_watch_and_re_evaluate"><a class="anchor" href="#_watch_and_re_evaluate"></a>Watch and Re-evaluate</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the <code>--watch</code> flag to make Mill watch a taskâs inputs,
re-evaluating the task as necessary when the inputs
change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ mill --watch foo.compile
$ mill --watch foo.run
$ mill -w foo.compile
$ mill -w foo.run</code></pre>
</div>
</div>
<div class="paragraph">
<p>Millâs <code>--watch</code> flag watches both the files you are building using Mill, as
well as Millâs own <code>build.mill</code> file and anything it imports, so any changes to
your <code>build.mill</code> will automatically get picked up.</p>
</div>
<div class="paragraph">
<p>For long-running processes like web servers, you can use <code>runBackground</code> to make sure they recompile and restart when code changes,
forcefully terminating the previous process even though it may be still alive:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ mill -w foo.runBackground</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_parallel_task_execution"><a class="anchor" href="#_parallel_task_execution"></a>Parallel Task Execution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, Mill will evaluate all tasks in parallel, with the number of concurrent
tasks equal to the number of cores on your machine. You can use the <code>--jobs</code> (<code>-j</code>) to configure
explicitly how many concurrent tasks you wish to run. To disable parallel execution use <code>-j1</code>.</p>
</div>
<div class="paragraph">
<p>Example: Use up to 4 parallel threads to compile all modules:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mill -j4 __.compile</code></pre>
</div>
</div>
<div class="paragraph">
<p>Every <code>mill</code> run generates an output file in <code>out/mill-chrome-profile.json</code> that can be
loaded into the Chrome browserâs <code>chrome://tracing</code> page for visualization.
This can make it much easier to analyze your parallel runs to find out whatâs
taking the most time:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/basic/ChromeTracing.png" alt="ChromeTracing.png" />
</div>
</div>
<div class="paragraph">
<p>Note that the maximal possible parallelism depends both on the number of cores
available as well as the task and module structure of your project, as tasks that
depend on one another other cannot be processed in parallel</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mill_cheat_sheet"><a class="anchor" href="#_mill_cheat_sheet"></a>Mill Cheat Sheet</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mill is a command-line tool and supports various options. Run <code>mill --help</code> for
a complete list of options and a cheat-sheet of how to work with tasks:</p>
</div>
<div class="listingblock">
<div class="title">Output of <code>mill --help</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">Mill Build Tool, version 0.12.0-19-f66304
Usage: mill [options] task [task-options] [+ task ...]

task cheat sheet:
  mill resolve _                 # see all top-level tasks and modules
  mill resolve __.compile        # see all `compile` tasks in any module (recursively)

  mill foo.bar.compile           # compile the module `foo.bar`

  mill foo.run --arg 1           # run the main method of the module `foo` and pass in `--arg 1`
  mill -i foo.console            # run the Scala console for the module `foo` (if it is a ScalaModule)

  mill foo.__.test               # run tests in modules nested within `foo` (recursively)
  mill foo.test arg1 arg2        # run tests in the `foo` module passing in test arguments `arg1 arg2`
  mill foo.test + bar.test       # run tests in the `foo` module and `bar` module
  mill '{foo,bar,qux}.test'      # run tests in the `foo` module, `bar` module, and `qux` module

  mill foo.assembly              # generate an executable assembly of the module `foo`
  mill show foo.assembly         # print the output path of the assembly of module `foo`
  mill inspect foo.assembly      # show docs and metadata for the `assembly` task on module `foo`

  mill clean foo.assembly        # delete the output of `foo.assembly` to force re-evaluation
  mill clean                     # delete the output of the entire build to force re-evaluation

  mill path foo.run foo.sources  # print the task chain showing how `foo.run` depends on `foo.sources`
  mill visualize __.compile      # show how the `compile` tasks in each module depend on one another

options:
  -D --define &lt;k=v&gt;    Define (or overwrite) a system property.
  --allow-positional   Allows command args to be passed positionally without `--arg` by default
  -b --bell            Ring the bell once if the run completes successfully, twice if it fails.
  --bsp                Enable BSP server mode.
  --color &lt;bool&gt;       Toggle colored output; by default enabled only if the console is interactive
  -d --debug           Show debug output on STDOUT
  --disable-callgraph  Disables fine-grained invalidation of tasks based on analyzing code changes.
                       If passed, you need to manually run `clean` yourself after build changes.
  --help               Print this help message and exit.
  -i --interactive     Run Mill in interactive mode, suitable for opening REPLs and taking user
                       input. This implies --no-server. Must be the first argument.
  --import &lt;str&gt;       Additional ivy dependencies to load into mill, e.g. plugins.
  -j --jobs &lt;str&gt;      The number of parallel threads. It can be an integer e.g. `5` meaning 5
                       threads, an expression e.g. `0.5C` meaning half as many threads as available
                       cores, or `C-2` meaning 2 threads less than the number of cores. `1` disables
                       parallelism and `0` (the default) uses 1 thread per core.
  -k --keep-going      Continue build, even after build failures.
  --meta-level &lt;int&gt;   Select a meta-level to run the given tasks. Level 0 is the main project in
                       `build.mill`, level 1 the first meta-build in `mill-build/build.mill`, etc.
  --no-server          Run without a background server. Must be the first argument.
  -s --silent          Make ivy logs during script import resolution go silent instead of printing
  --ticker &lt;bool&gt;      Enable ticker log (e.g. short-lived prints of stages and progress bars).
  -v --version         Show mill version information and exit.
  -w --watch           Watch and re-run the given tasks when when their inputs change.
  task &lt;str&gt;...        The name or a pattern of the tasks(s) you want to build.

Please see the documentation at https://mill-build.org for more details</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that options and flags given before the <code>task</code> name are <em>passed to Mill</em>, while
options and flags after the <code>task</code> name are <em>passed to the task</em>. This mirrors how
most command line script or task runners work (e.g. <code>python &lt;python-args&gt; script.py &lt;script-args&gt;</code>)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_maven_compatible_modules"><a class="anchor" href="#_maven_compatible_modules"></a>Maven-Compatible Modules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Millâs default folder layout of <code>foo/src/</code> and <code>foo/test/src</code> differs from that
of Maven or Gradleâs <code>foo/src/main/java/</code> and <code>foo/src/test/java/</code>. If you are
migrating an existing codebase, you can use Millâs <code>MavenModule</code> and
<code>MavenTests</code> as shown below to preserve filesystem compatibility with an existing
Maven or Gradle build:</p>
</div>
<div class="listingblock">
<div class="title">build.mill (<a href="https://github.com/com-lihaoyi/mill/releases/download/0.12.0/0.12.0-example-javalib-basic-4-compat-modules.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/0.12.0//example/javalib/basic/4-compat-modules">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">package build
import mill._, javalib._

object foo extends MavenModule {
  object test extends MavenTests with TestModule.Junit4
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>MavenModule</code> is a variant of <code>JavaModule</code>
that uses the more verbose folder layout of Maven, SBT, and other tools:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>foo/src/main/java</code></p>
</li>
<li>
<p><code>foo/src/test/java</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Rather than Millâs</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>foo/src</code></p>
</li>
<li>
<p><code>foo/test/src</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is especially useful if you are migrating from Maven to Mill (or vice
versa), during which a particular module may be built using both Maven and
Mill at the same time</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&gt; mill foo.compile
compiling 1 Java source...

&gt; mill foo.test.compile
compiling 1 Java source...

&gt; mill foo.test.test
...foo.FooTests.hello ...

&gt; mill foo.test
...foo.FooTests.hello ...</code></pre>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../index.html">Mill Documentation</a></span>
  <span class="next"><a href="installation-ide.html">Installation and IDE Support</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async="async" src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async="async" src="../../search-index.js"></script>
  
</body></html>