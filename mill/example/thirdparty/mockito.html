<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Untitled :: The Mill Build Tool</title>
    <meta name="generator" content="Antora 3.1.9" />
    <link rel="stylesheet" href="../../../_/css/site.css" />
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-1C582ZJR85"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','G-1C582ZJR85')</script>
<link rel="icon" href="../../../_/favicon.png" type="image/x-icon" />
  
  </head><body class="article">
  
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <!-- TODO: add mill icon -->
      <a class="navbar-item" href="https://mill-build.org"><img src="../../../_/logo-white.svg" height="20" />Â The Mill Build Tool</a>
      <div class="navbar-item search">
        <input id="search-input" type="text" placeholder="Search the docs" />
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill">Source Code (GitHub)</a>
        <a class="navbar-item" href="https://mill-build.org/api/latest/index.html">API</a>
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill/issues">Issues</a>
        <a class="navbar-item" href="https://github.com/com-lihaoyi/mill/discussions">Discuss</a>
        <a class="navbar-item" href="https://gitter.im/lihaoyi/mill">Chat</a>

            <!--
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Documentation</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#"></a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Plugins</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
        -->
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="mill" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list">

  <li class="nav-item is-active" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../Java_Intro_to_Mill.html">Introduction to Mill for Java</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Java_Installation_IDE_Support.html">Installation and IDE Support</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Java_Builtin_Commands.html">Built-in Commands</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Java_Module_Config.html">Java Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Java_Build_Examples.html">Java Build Examples</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Testing_Java_Projects.html">Testing Java Projects</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Java_Web_Examples.html">Java Web Examples</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Case_Study_Mill_vs_Maven.html">Case Study: Mill vs Maven</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Case_Study_Mill_vs_Gradle.html">Case Study: Mill vs Gradle</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../Scala_Intro_to_Mill.html">Introduction to Mill for Scala</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Scala_Installation_IDE_Support.html">Installation and IDE Support</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Scala_Builtin_Commands.html">Built-in Commands</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Scala_Module_Config.html">Scala Module Configuration</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Scala_Build_Examples.html">Scala Build Examples</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Testing_Scala_Projects.html">Testing Scala Projects</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Scala_Web_Examples.html">Scala Web Examples</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Mill In Depth</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Library_Dependencies.html">Library Dependencies in Mill</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Out_Dir.html">The Output Directory</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Tasks.html">Tasks</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Modules.html">Modules</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Cross_Builds.html">Cross Builds</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Target_Query_Syntax.html">Target Query Syntax</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../The_Mill_Evaluation_Model.html">The Mill Evaluation Model</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extending Mill</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Import_File_And_Import_Ivy.html">import $file and import $ivy</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Using_Plugins.html">Using Plugins</a>
  </li>

  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../Contrib_Plugins.html">Contrib Plugins</a>
<ul class="nav-list">

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contrib/artifactory.html">Artifactory</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contrib/bintray.html">Bintray</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contrib/bloop.html">Bloop</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contrib/buildinfo.html">BuildInfo</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contrib/codeartifact.html">Codeartifact</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contrib/docker.html">Docker</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contrib/flyway.html">Flyway</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contrib/gitlab.html">Gitlab</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contrib/jmh.html">JMH</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contrib/playlib.html">Play Framework</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contrib/proguard.html">Proguard</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contrib/scalapblib.html">ScalaPB</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contrib/scoverage.html">Scoverage</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contrib/testng.html">TestNG</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contrib/twirllib.html">Twirl</a>
  </li>

  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../contrib/versionfile.html">Version file</a>
  </li>
</ul>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Thirdparty_Plugins.html">Third-Party Plugins</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Writing_Mill_Plugins.html">Writing Mill Plugins</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../The_Mill_Meta_Build.html">The Mill Meta-Build</a>
  </li>
</ul>
  </li>

  <li class="nav-item is-active" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Mill_Design_Principles.html">Mill Design Principles</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../External_References.html">External References</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://mill-build.org/api/latest/mill/index.html">Mill Scaladoc</a>
  </li>

  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../Changelog.html">Changelog</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Mill Documentation</span>
    <span class="version">0.12.0-M0-42-81cbf1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../../0.11.12/index.html">Mill Documentation</a></div>
      <ul class="versions">
        <li class="version is-current">
          <a href="../../index.html">0.12.0-M0-42-81cbf1</a>
        </li>
        <li class="version is-latest">
          <a href="../../0.11.12/index.html">0.11.12</a>
        </li>
        <li class="version">
          <a href="../../0.11.11/index.html">0.11.11</a>
        </li>
        <li class="version">
          <a href="../../0.11.10/index.html">0.11.10</a>
        </li>
        <li class="version">
          <a href="../../0.11.0-M7/index.html">0.11.0-M7</a>
        </li>
        <li class="version">
          <a href="../../0.10.15/index.html">0.10.15</a>
        </li>
        <li class="version">
          <a href="../../0.10.12/index.html">0.10.12</a>
        </li>
        <li class="version">
          <a href="../../0.10.0/index.html">0.10.0</a>
        </li>
        <li class="version">
          <a href="../../0.9.12/index.html">0.9.12</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../0.11.12/Java_Intro_to_Mill.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">0.12.0-M0-42-81cbf1</button>
  <div class="version-menu">
    <a class="version is-current" href="mockito.html">0.12.0-M0-42-81cbf1</a>
    <a class="version is-missing" href="../../0.11.12/index.html">0.11.12</a>
    <a class="version is-missing" href="../../0.11.11/index.html">0.11.11</a>
    <a class="version is-missing" href="../../0.11.10/index.html">0.11.10</a>
    <a class="version is-missing" href="../../0.11.0-M7/index.html">0.11.0-M7</a>
    <a class="version is-missing" href="../../0.10.15/index.html">0.10.15</a>
    <a class="version is-missing" href="../../0.10.12/index.html">0.10.12</a>
    <a class="version is-missing" href="../../0.10.0/index.html">0.10.0</a>
    <a class="version is-missing" href="../../0.9.12/index.html">0.9.12</a>
  </div>
</div>
<div class="edit-this-page"><a href="https://github.com/com-lihaoyi/mill/edit/main/docs/modules/ROOT/pages/example/thirdparty/mockito.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="listingblock">
<div class="title">build.sc (<a href="https://github.com/com-lihaoyi/mill/releases/download/0.12.0-M0/0.12.0-M0-example-thirdparty-mockito.zip">download</a>, <a href="https://github.com/com-lihaoyi/mill/blob/0.12.0-M0//example/thirdparty/mockito">browse</a>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">import mill._, javalib._

object libraries{

  object versions {
    val bytebuddy = &quot;1.14.18&quot;
    val junitJupiter = &quot;5.10.3&quot;
    val errorprone = &quot;2.23.0&quot;
  }
  val junit4 = ivy&quot;junit:junit:4.13.2&quot;
  val junitJupiterApi = ivy&quot;org.junit.jupiter:junit-jupiter-api:${versions.junitJupiter}&quot;
  val junitJupiterParams = ivy&quot;org.junit.jupiter:junit-jupiter-params:${versions.junitJupiter}&quot;
  val junitPlatformLauncher = ivy&quot;org.junit.platform:junit-platform-launcher:1.10.3&quot;
  val junitJupiterEngine = ivy&quot;org.junit.jupiter:junit-jupiter-engine:${versions.junitJupiter}&quot;
  val junitVintageEngine = ivy&quot;org.junit.vintage:junit-vintage-engine:${versions.junitJupiter}&quot;
  val assertj = ivy&quot;org.assertj:assertj-core:3.26.3&quot;
  val hamcrest = ivy&quot;org.hamcrest:hamcrest-core:2.2&quot;
  val opentest4j = ivy&quot;org.opentest4j:opentest4j:1.3.0&quot;

  val bytebuddy = ivy&quot;net.bytebuddy:byte-buddy:${versions.bytebuddy}&quot;
  val bytebuddyagent = ivy&quot;net.bytebuddy:byte-buddy-agent:${versions.bytebuddy}&quot;
  val bytebuddyandroid = ivy&quot;net.bytebuddy:byte-buddy-android:${versions.bytebuddy}&quot;

  val errorprone = ivy&quot;com.google.errorprone:error_prone_core:${versions.errorprone}&quot;
  val errorproneTestApi = ivy&quot;com.google.errorprone:error_prone_test_helpers:${versions.errorprone}&quot;

  val autoservice = ivy&quot;com.google.auto.service:auto-service:1.1.1&quot;

  val objenesis = ivy&quot;org.objenesis:objenesis:3.3&quot;

  val osgi = ivy&quot;org.osgi:osgi.core:8.0.0&quot;
  val equinox = ivy&quot;org.eclipse.platform:org.eclipse.osgi:3.20.0&quot;
  val bndGradle =  &quot;biz.aQute.bnd:biz.aQute.bnd.gradle:6.4.0&quot;

  val groovy = ivy&quot;org.codehaus.groovy:groovy:3.0.22&quot;
}

trait MockitoModule extends MavenModule{
  def testModuleDeps: Seq[JavaModule] = Nil
  def testIvyDeps: T[Agg[Dep]] = Agg.empty[Dep]
  def testRuntimeIvyDeps: T[Agg[Dep]] = Agg.empty[Dep]
  def testFramework = &quot;com.novocode.junit.JUnitFramework&quot;
  def testForkArgs: T[Seq[String]] = Seq.empty[String]
  object test extends MavenTests{
    def moduleDeps = super.moduleDeps ++ MockitoModule.this.testModuleDeps
    def testFramework = MockitoModule.this.testFramework
    def runIvyDeps = testRuntimeIvyDeps()
    def forkArgs = testForkArgs()
    def ivyDeps =
      testIvyDeps() ++
      Agg(
        libraries.hamcrest,
        libraries.junit4,
        libraries.bytebuddyagent,
        ivy&quot;com.github.sbt:junit-interface:0.13.2&quot;
      )
  }
}

object mockito extends RootModule with MockitoModule{
  def compileIvyDeps = Agg(
    libraries.hamcrest, libraries.junit4, libraries.bytebuddyagent,
    libraries.bytebuddy,
    libraries.opentest4j
  )

  def ivyDeps = Agg(
    libraries.objenesis
  )

  def testIvyDeps = Agg(
    libraries.assertj,
    libraries.junitJupiterApi,
    libraries.junitJupiterParams
  )

  def resources = T{
    val subpath = os.SubPath(&quot;org/mockito/internal/creation/bytebuddy/inject/&quot;)
    os.copy(
      compile().classes.path / subpath / &quot;MockMethodDispatcher.class&quot;,
      T.dest / subpath / &quot;MockMethodDispatcher.raw&quot;,
      createFolders = true
    )
    super.resources() ++ Seq(PathRef(T.dest))
  }

  object subprojects extends Module {
    object android extends MockitoModule {
      def moduleDeps = Seq(mockito)
      def ivyDeps = Agg(libraries.bytebuddyandroid)
    }
    object errorprone extends MockitoModule {
      def compileIvyDeps = Agg(libraries.autoservice)
      def moduleDeps = Seq(mockito)
      def ivyDeps = Agg(libraries.errorprone)
      def testIvyDeps = Agg(libraries.errorproneTestApi)

      def forkArgs = Seq(
        //      &quot;-processorpath&quot;, libraries.autoservice,
        &quot;-Xbootclasspath/a:${configurations.errorproneJavac.asPath}&quot;,
        &quot;--add-exports=jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED&quot;,
        &quot;--add-exports=jdk.compiler/com.sun.tools.javac.type=ALL-UNNAMED&quot;,
        &quot;--add-exports=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED&quot;,
        &quot;--add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED&quot;,
        &quot;--add-exports=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED&quot;,
        &quot;--add-exports=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED&quot;,
        &quot;--add-exports=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED&quot;,
        &quot;--add-exports=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED&quot;,
        &quot;--add-exports=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED&quot;,
      )

      def javacOptions = Seq(
        &quot;--add-exports=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED&quot;,
        &quot;--add-exports=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED&quot;,
        &quot;--add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED&quot;
      )
    }
    object extTest extends MockitoModule{
      def moduleDeps = Seq(mockito, `junit-jupiter`)
      def testModuleDeps = Seq(mockito.test)
      def testIvyDeps = Agg(
        libraries.junit4,
        libraries.assertj,
        libraries.junitJupiterApi,
      )

      def testRuntimeIvyDeps = Agg(
        libraries.junitJupiterEngine,
        libraries.junitVintageEngine,
        libraries.junitPlatformLauncher
      )
    }

    object inlineTest extends MockitoModule{
      def testModuleDeps = Seq(mockito)
      def testIvyDeps = Agg(libraries.junit4, libraries.assertj)
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>object <code>java21-test</code> extends MockitoModule{
     def testModuleDeps = Seq(mockito)
     def testIvyDeps = Agg(libraries.junit4, libraries.assertj)
   }</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">object `junit-jupiter` extends MockitoModule{
      def moduleDeps = Seq(mockito)

      def ivyDeps = Agg(libraries.junitJupiterApi)
      def testFramework = &quot;com.github.sbt.junit.jupiter.api.JupiterFramework&quot;
      def testIvyDeps = Agg(
        libraries.assertj,
        libraries.junitPlatformLauncher,
        ivy&quot;com.github.sbt.junit:jupiter-interface:0.11.4&quot;
      )

      def testRuntimeIvyDeps = Agg(
        libraries.junitJupiterEngine,
      )
    }

    object junitJupiterExtensionTest extends MockitoModule{
      def testFramework = &quot;com.github.sbt.junit.jupiter.api.JupiterFramework&quot;
      def testModuleDeps = Seq(`junit-jupiter`)
      def testIvyDeps = Agg(libraries.assertj, libraries.junitJupiterApi)
      def testRuntimeIvyDeps = Agg(
        libraries.junitJupiterEngine, libraries.junitPlatformLauncher,
        ivy&quot;com.github.sbt.junit:jupiter-interface:0.11.4&quot;
      )
    }
    object junitJupiterInlineMockMakerExtensionTest extends MockitoModule{
      def testFramework = &quot;com.github.sbt.junit.jupiter.api.JupiterFramework&quot;
      def testModuleDeps = Seq(`junit-jupiter`)
      def testIvyDeps = Agg(libraries.assertj, libraries.junitJupiterApi)
      def testRuntimeIvyDeps = Agg(
        libraries.junitJupiterEngine, libraries.junitPlatformLauncher,
        ivy&quot;com.github.sbt.junit:jupiter-interface:0.11.4&quot;
      )
    }
    object junitJupiterParallelTest extends MockitoModule{
      def testFramework = &quot;com.github.sbt.junit.jupiter.api.JupiterFramework&quot;
      def testModuleDeps = Seq(`junit-jupiter`)
      def testIvyDeps = Agg(libraries.junitJupiterApi)
      def testRuntimeIvyDeps = Agg(
        libraries.junitJupiterEngine, libraries.junitPlatformLauncher,
        ivy&quot;com.github.sbt.junit:jupiter-interface:0.11.4&quot;,
        libraries.bytebuddy
      )
    }
    object `memory-test` extends MockitoModule{
      def testModuleDeps = Seq(mockito)
      def testIvyDeps = Agg(libraries.assertj)
      def testForkArgs = Seq(&quot;-Xmx128m&quot;)
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>object <code>osgi-test</code> extends MockitoModule {
     def testModuleDeps = Seq(mockito)
     def testIvyDeps = Agg(libraries.junit4, libraries.osgi)
     def testRuntimeIvyDeps = Agg(libraries.equinox)
     trait BundleModule extends MockitoModule{
       def bundleName: String = millModuleSegments.parts.last
       override def millSourcePath = <code>osgi-test</code>.millSourcePath
       def sources = T.sources(millSourcePath / &quot;src&quot; / bundleName / &quot;java&quot;)</p>
</div>
<div class="literalblock">
<div class="content">
<pre>       def manifest = super.manifest().add(
         &quot;Bundle-Name&quot; -&gt; bundleName,
         &quot;Bundle-SymbolicName&quot; -&gt; bundleName,
         &quot;Bundle-Name&quot; -&gt; &quot;Mockito Mock Library for Java. Core bundle requires Byte Buddy and Objenesis.&quot;,
         &quot;Bundle-SymbolicName&quot; -&gt; &quot;org.mockito.mockito-core&quot;,
//          &quot;Bundle-Version&quot; -&gt; s&quot;$${version_cleanup;0.0.0}&quot;,
         &quot;-versionpolicy&quot; -&gt; &quot;[${version;==;${@}},${version;+;${@}})&quot;,
         &quot;Export-Package&quot; -&gt; &quot;org.mockito.internal.*;status=INTERNAL;mandatory:=status;version=0.0.0,org.mockito.*;version=0.0.0&quot;,
         &quot;Import-Package&quot; -&gt; Seq(
           &quot;net.bytebuddy.*;version=\&quot;[1.6.0,2.0)\&quot;&quot;,
           &quot;junit.*;resolution:=optional&quot;,
           &quot;org.junit.*;resolution:=optional&quot;,
           &quot;org.hamcrest;resolution:=optional&quot;,
           &quot;org.objenesis;version=\&quot;[3.1,4.0)\&quot;&quot;,
           &quot;org.opentest4j.*;resolution:=optional&quot;,
           &quot;org.mockito.*&quot;
         ).mkString(&quot;,&quot;),
         &quot;-removeheaders&quot; -&gt; &quot;Private-Package&quot;,
         &quot;Automatic-Module-Name&quot; -&gt; &quot;org.mockito&quot;,
         &quot;-noextraheaders&quot; -&gt; &quot;true&quot;
       )
     }</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>object testBundle extends BundleModule{
  def moduleDeps = Seq(`osgi-test`.test, otherBundle)
  def ivyDeps = Agg(libraries.osgi)
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>object otherBundle extends BundleModule{
  def moduleDeps = Seq(`osgi-test`.test)
  def ivyDeps = Agg(libraries.osgi)
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>object testRuntimeBundles extends JavaModule{
  def unmanagedClasspath = Agg(testBundle.jar(), otherBundle.jar(), mockito.jar())
  def ivyDeps = Agg(libraries.bytebuddy, libraries.bytebuddyagent, libraries.objenesis)
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>  def testForkArgs = Seq(
    s&quot;-DtestRuntimeBundles=${testRuntimeBundles.runClasspath().map(_.path).distinct.filter(os.exists(_)).mkString(java.io.File.pathSeparator)}&quot;
  )
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala">object `programmatic-test` extends MockitoModule{
      def testModuleDeps = Seq(mockito)
      def testIvyDeps = Agg(libraries.junit4, libraries.assertj)
    }
    object proxy extends MockitoModule{
      def testModuleDeps = Seq(mockito)
      def testIvyDeps = Agg(libraries.junit4, libraries.assertj)
    }
    object subclass extends MockitoModule{
      def testModuleDeps = Seq(mockito)
      def testIvyDeps = Agg(libraries.junit4, libraries.assertj)
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run a few smoketests on the mockito repo, compiling everything (including tests)
but only running the subset of tests that run quickly</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">&gt; ./mill -j5 __.compile

&gt; ./mill __.test
Test org.mockitoinline.StaticMockTest.testStaticMockSimple...
Test org.mockito.internal.creation.MockSettingsImplTest.validates_invocation_listeners finished...
Test org.mockitousage.junitrunner.StubbingWarningsJUnitRunnerTest.shows_arg_mismatch_warnings_when_test_fails finished...
Test org.mockitousage.session.MockitoSessionTest.allows_updating_strictness finished...
...</code></pre>
</div>
</div>
</article>
  </div>
</main>
</div>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async="async" src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async="async" src="../../../search-index.js"></script>
  
</body></html>